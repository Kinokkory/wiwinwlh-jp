このページは [What I Wish I Knew When Learning Haskell 2.2](http://dev.stephendiehl.com/hask/) の日本語訳です。

***

![](https://raw.githubusercontent.com/sdiehl/wiwinwlh/master/img/title.png)

（Haskell の勉強中に僕なら知りたいこと）

スティーヴン＝ディール ([@smdiehl](https://twitter.com/smdiehl))

全てのコードのソースは[ここにあります](https://github.com/sdiehl/wiwinwlh/tree/master/src)。誤りやより分かりやすい例があれば、Github にプルリクエストを気兼ねなく出してください。

これは第3草案です。

###ライセンス

このコードとテキストはパブリックドメインに捧げられています。この作品の複製、改変、頒布、実演には、商業目的であったとしても、許可を取る必要はありません。

###更新履歴 (2.2)

追記・大きい変更のなされた節：

* [反駁不可パターン](遅延性#irrefutable-patterns)
* [Hackage](基本#hackage)
* [網羅性](基本#exhaustiveness)
* [スタックトレース](基本#stacktraces)
* [遅延性](遅延性)
* [型システム](量化#type-systems)（スコーレム・キャプチャ）
* （他言語）[関数ポインタ](FFI#function-pointers)
* [attoparsec](パース処理#attoparsec)
* （インラインの）[Cmm](GHC#cmm)
* [IO と ST](GHC#io-st)（PrimMonad）
* [特殊化](GHC#specialization)
* [unbound のジェネリクス](言語#unbound-generics)
* [エディタの統合](基本#editor-integration)
* [EKG](プロファイリング#ekg)
* [Nix](基本#nix)
* [Haddock](基本#haddock)
* [モナド・チュートリアル](モナド#monad-tutorials)
* [モナド射](モナド変換子#monad-morphisms)
* [余再帰](Prelude#corecursion)
* [圏](Applicative#category)
* [アロー](Applicative#arrows)
* [双関手](Applicative#bifunctors)
* [ExceptT](エラー処理#exceptt)
* [hint と mueval](インタプリタ#hint-and-mueval)
* [役割](型族#roles)
* [高階種](昇格#higher-kinds)
* [種多相](昇格#kind-polymorphism)
* [数値の塔](数学#numeric-tower)
* [SAT ソルバ](数学#sat-solvers)
* [グラフ](データ構造#graphs)
* [スパーク](並行性#sparks)
* [スレッドスコープ](並行性#threadscope)
* [ジェネリックなパース処理](パース処理#generic-parsing)
* [ブロック図](GHC#block-diagram)（とデバッグ用フラグ）
* [コア](GHC#core)
* [インライナ](GHC#inliner)
* [非ボックス型](GHC#unboxed-types)（と実行時メモリ表現）
* [ghc-heap-view](GHC#ghc-heap-view)
* [STG](GHC#stg)
* [ワーカとラッパ](GHC#worker-wrapper)
* [Z エンコーディング](GHC#z-encoding)
* [Cmm](GHC#cmm)
* [最適化ハック](GHC#optimization-hacks)
* [RTS プロファイリング](プロファイリング#rts-profiling)
* [代数的関係](圏#algebraic-relations)

# 目次

* [基本](基本#basic)
    * [Cabal](基本#cabal)
    * [Hackage](基本#hackage)
    * [GHCi](基本#ghci)
    * [エディタの統合](基本#editor-integration)
    * [ボトム](基本#bottoms)
    * [網羅性](基本#exhaustiveness)
    * [デバッガ](基本#debugger)
    * [スタックトレース](基本#stacktraces)
    * [トレース](基本#trace)
    * [型の穴](基本#typed-holes)
    * [Nix](基本#nix)
    * [Haddock](基本#haddock)
* [モナド](モナド#monad)
    * [モナド菩提への八正道](モナド#eightfold-path-to-monad-satori)
    * [モナド神話](モナド#monadic-myths)
    * [法則](モナド#laws)
    * [do 記法](モナド#do-notation)
    * [Maybe](モナド#maybe)
    * [リスト](モナド#list)
    * [IO](モナド#io)
    * [要は？](モナド#whats-the-point)
    * [読み取りモナド](モナド#reader-monad)
    * [書き留めモナド](モナド#writer-monad)
    * [状態モナド](モナド#state-monad)
    * [モナド・チュートリアル](モナド#monad-tutorials)
* [モナド変換子](モナド変換子#monad-transformers)
    * [mtl と transformers](モナド変換子#mtl-transformers)
    * [変換子](モナド変換子#transformers)
    * [ReaderT](モナド変換子#readert)
    * [基本](モナド変換子#basics)
    * [newtype 導出](モナド変換子#newtype-deriving)
    * [効率](モナド変換子#efficiency)
    * [モナド射](モナド変換子#monad-morphisms)
* [言語拡張](言語拡張#language-extensions)
    * [はじめに](言語拡張#introduction)
    * [安全なもの](言語拡張#the-benign)
    * [危険なもの](言語拡張#the-dangerous)
    * [型推論](言語拡張#inference)
    * [単相性制限](言語拡張#monomorphism-restriction)
    * [セーフハスケル](言語拡張#safe-haskell)
    * [パターンガード](言語拡張#pattern-guards)
    * [ビューパターン](言語拡張#view-patterns)
    * [その他の構文上の拡張](言語拡張#misc-syntax-extensions)
    * [パターンシノニム](言語拡張#pattern-synonyms)
* [遅延性](遅延性#laziness)
    * [はじめに](遅延性#introduction)
    * [正格性](遅延性#strictness)
    * [seq と WHNF](遅延性#seq-and-whnf)
    * [正格性注釈](遅延性#strictness-annotations)
    * [deepseq](遅延性#deepseq)
    * [反駁不可パターン](遅延性#irrefutable-patterns)
    * [道徳的な正しさ](遅延性#moral-correctness)
* [Prelude](Prelude#prelude)
    * [使わない方がいいのはどれ？](Prelude#what-to-avoid)
    * [部分関数](Prelude#partial-functions)
    * [safe](Prelude#safe)
    * [ブール値の不透明性](Prelude#boolean-blindness)
    * [Foldable と Traversable](Prelude#foldable-traversable)
    * [余再帰](Prelude#corecursion)
    * [split](Prelude#split)
    * [monad-loops](Prelude#monad-loops)
* [Text と ByteString](Text と ByteString#text-bytestring)
    * [はじめに](Text と ByteString#introduction)
    * [Text](Text と ByteString#text)
    * [Text.Builder](Text と ByteString#text-builder)
    * [ByteString](Text と ByteString#bytestring)
    * [printf](Text と ByteString#printf)
    * [多重定義されたリスト](Text と ByteString#overloaded-lists)
* [Applicative](Applicative#applicatives)
    * [はじめに](Applicative#introduction)
    * [型クラスの階層](Applicative#typeclass-hierarchy)
    * [Alternative](Applicative#alternative)
    * [可変個引数関数](Applicative#polyvariadic-functions)
    * [圏](Applicative#category)
    * [アロー](Applicative#arrows)
    * [双関手](Applicative#bifunctors)
* [エラー処理](エラー処理#error-handling)
    * [Control.Exception](エラー処理#control-exception)
    * [例外](エラー処理#exceptions)
    * [Either](エラー処理#either)
    * [ErrorT](エラー処理#errort)
    * [ExceptT](エラー処理#exceptt)
    * [EitherT](エラー処理#eithert)
* [高度なモナド](高度なモナド#advanced-monads)
    * [関数モナド](高度なモナド#function-monad)
    * [RWS モナド](高度なモナド#rws-monad)
    * [Cont](高度なモナド#cont)
    * [MonadPlus](高度なモナド#monadplus)
    * [MonadFix](高度なモナド#monadfix)
    * [ST モナド](高度なモナド#st-monad)
    * [自由モナド](高度なモナド#free-monads)
    * [指標付きモナド](高度なモナド#indexed-monads)
* [量化](量化#quantification)
    * [全称量化](量化#universal-quantification)
    * [自由定理](量化#free-theorems)
    * [型システム](量化#type-systems)
    * [存在量化](量化#existential-quantification)
    * [不可述型](量化#impredicative-types)
    * [スコープのある型変数](量化#scoped-type-variables)
* [GADT](GADT#gadts)
    * [GADT](GADT#gadts2)
    * [種注釈](GADT#kind-signatures)
    * [Void](GADT#void)
    * [幽霊型](GADT#phantom-types)
    * [型等価性](GADT#type-equality)
* [インタプリタ](インタプリタ#interpreters)
    * [はじめに](インタプリタ#introduction)
    * [HOAS](インタプリタ#hoas)
    * [PHOAS](インタプリタ#phoas)
    * [仕上げのインタプリタ](インタプリタ#final-interpreters)
    * [タグ無し仕上げインタプリタ](インタプリタ#finally-tagless)
    * [データ型](インタプリタ#datatypes)
    * [F 代数](インタプリタ#f-algebras)
    * [再帰スキーム](インタプリタ#recursion-schemes)
    * [hint と mueval](インタプリタ#hint-and-mueval)
* [テスト](テスト#testing)
    * [はじめに](テスト#introduction)
    * [QuickCheck](テスト#quickcheck)
    * [SmallCheck](テスト#smallcheck)
    * [QuickSpec](テスト#quickspec)
    * [criterion](テスト#criterion)
    * [tasty](テスト#tasty)
* [型族](型族#type-families)
    * [多引数型クラス](型族#multiparam-typeclasses)
    * [型族](型族#type-families)
    * [単射性](型族#injectivity)
    * [役割](型族#roles)
    * [MonoTraversable](型族#monotraversable)
    * [NonEmpty](型族#nonempty)
    * [手動証明](型族#manual-proofs)
    * [制約種](型族#constraint-kinds)
* [昇格](昇格#promotion)
    * [高階種](昇格#higher-kinds)
    * [種多相](昇格#kind-polymorphism)
    * [データ種](昇格#data-kinds)
    * [配列](昇格#vectors)
    * [型レベル数値](昇格#typelevel-numbers)
    * [型等価性](昇格#type-equality)
    * [代理](昇格#proxy)
    * [昇格された構文](昇格#promoted-syntax)
    * [シングルトン型](昇格#singleton-types)
    * [閉じた型族](昇格#closed-type-families)
    * [種を指標とする型族](昇格#kind-indexed-type-families)
    * [昇格されたシンボル](昇格#promoted-symbols)
    * [HList](昇格#hlists)
    * [型レベルマップ](昇格#typelevel-maps)
    * [高度な証明](昇格#advanced-proofs)
* [ジェネリクス](ジェネリクス#generics)
    * [はじめに](ジェネリクス#introduction)
    * [Typeable](ジェネリクス#typeable)
    * [Dynamic](ジェネリクス#dynamic)
    * [Data](ジェネリクス#data)
    * [Generic](ジェネリクス#generic)
    * [ジェネリックな導出](ジェネリクス#generic-deriving)
    * [uniplate](ジェネリクス#uniplate)
* [数学](数学#mathematics)
    * [数値の塔](数学#numeric-tower)
    * [整数](数学#integer)
    * [複素数](数学#complex)
    * [Scientific](数学#scientific)
    * [統計](数学#statistics)
    * [構成的実数](数学#constructive-reals)
    * [SAT ソルバ](数学#sat-solvers)
    * [SMT ソルバ](数学#smt-solvers)
* [データ構造](データ構造#data-structures)
    * [マップ](データ構造#map)
    * [ツリー](データ構造#tree)
    * [セット](データ構造#set)
    * [配列](データ構造#vector)
    * [可変配列](データ構造#mutable-vectors)
    * [非整序コンテナ](データ構造#unordered-containers)
    * [ハッシュテーブル](データ構造#hashtables)
    * [グラフ](データ構造#graphs)
    * [グラフ理論](データ構造#graph-theory)
    * [DList](データ構造#dlist)
    * [シーケンス](データ構造#sequence)
    * [行列と HBlas](データ構造#matrices-and-hblas)
* [FFI](FFI#ffi)
    * [純粋関数](FFI#pure-functions)
    * [貯蔵可能配列](FFI#storable-arrays)
    * [関数ポインタ](FFI#function-pointers)
* [並行性](並行性#concurrency)
    * [はじめに](並行性#introduction)
    * [スパーク](並行性#sparks)
    * [スレッドスコープ](並行性#threadscope)
    * [戦略](並行性#strategies)
    * [STM](並行性#stm)
    * [par-monad](並行性#par-monad)
    * [async](並行性#async)
* [グラフィクス](グラフィクス#graphics)
    * [diagrams](グラフィクス#diagrams)
    * [gloss](グラフィクス#gloss)
* [パース処理](パース処理#parsing)
    * [parsec](パース処理#parsec)
    * [カスタムレクサ](パース処理#custom-lexer)
    * [単純なパース処理](パース処理#simple-parsing)
    * [状態遷移のあるパース処理](パース処理#stateful-parsing)
    * [ジェネリックなパース処理](パース処理#generic-parsing)
    * [attoparsec](パース処理#attoparsec)
* [ストリーミング](ストリーミング#streaming)
    * [怠惰な IO](ストリーミング#lazy-io)
    * [pipes](ストリーミング#pipes)
    * [安全な pipes](ストリーミング#safe-pipes)
    * [conduit](ストリーミング#conduits)
* [データフォーマット](データフォーマット#data-formats)
    * [JSON](データフォーマット#json)
    * [CSV](データフォーマット#csv)
* [ネットワークとウェブプログラミング](ネットワークとウェブプログラミング#network-web-programming)
    * [HTTP](ネットワークとウェブプログラミング#http)
    * [Warp](ネットワークとウェブプログラミング#warp)
    * [Scotty](ネットワークとウェブプログラミング#scotty)
* [データベース](データベース#databases)
    * [acid-state](データベース#acid-state)
* [GHC](GHC#ghc)
    * [ブロック図](GHC#block-diagram)
    * [コア](GHC#core)
    * [インライナ](GHC#inliner)
    * [辞書](GHC#dictionaries)
    * [特殊化](GHC#specialization)
    * [静的コンパイル](GHC#static-compilation)
    * [非ボックス型](GHC#unboxed-types)
    * [IO と ST](GHC#io-st)
    * [ghc-heap-view](GHC#ghc-heap-view)
    * [STG](GHC#stg)
    * [ワーカとラッパ](GHC#worker-wrapper)
    * [Z エンコーディング](GHC#z-encoding)
    * [Cmm](GHC#cmm)
    * [最適化ハック](GHC#optimization-hacks)
* [プロファイリング](プロファイリング#profiling)
    * [EKG](プロファイリング#ekg)
    * [RTS プロファイリング](プロファイリング#rts-profiling)
* [言語](言語#languages)
    * [unbound](言語#unbound)
    * [unbound のジェネリクス](言語#unbound-generics)
    * [LLVM](言語#llvm)
    * [プリンタのコンビネータ](言語#printer-combinators)
    * [haskeline](言語#haskeline)
* [テンプレートハスケル](テンプレートハスケル#template-haskell)
    * [準クオート](テンプレートハスケル#quasiquotation)
    * [Language.C.Quote](テンプレートハスケル#language-c-quote)
    * [テンプレートハスケル](テンプレートハスケル#template-haskell2)
    * [反クオート](テンプレートハスケル#antiquotation)
    * [テンプレート型族](テンプレートハスケル#templated-type-families)
    * [テンプレート型クラス](テンプレートハスケル#templated-type-classes)
    * [テンプレートシングルトン](テンプレートハスケル#template-singletons)
* [レンズ](レンズ#lenses)
    * [はじめに](レンズ#introduction)
    * [lens ライブラリは使うべき？](レンズ#should-i-use-lens-library)
    * [ファン＝ラーホーフェンのレンズ](レンズ#van-laarhoven-lenses)
    * [lens-family](レンズ#lens-family)
    * [多相更新](レンズ#polymorphic-update)
    * [プリズム](レンズ#prisms)
    * [状態モナドと zoom](レンズ#state-and-zoom)
    * [lens + aeson](レンズ#lens-aeson)
* [圏](圏#categories)
    * [はじめに](圏#introduction)
    * [代数的関係](圏#algebraic-relations)
    * [圏](圏#categories2)
    * [同型](圏#isomorphisms)
    * [双対性](圏#duality)
    * [関手](圏#functors)
    * [自然変換](圏#natural-transformations)
    * [米田の補題](圏#yoneda-lemma)
    * [クライスリ圏](圏#kleisli-category)
    * [参考文献](圏#resources)
